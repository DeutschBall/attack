#!/bin/bash
if [ "$#" -lt 2 ]; then
    echo "error: insufficient arguments"
    echo "usage: "
    echo "./fake_image.sh <path> <count>"
    echo "generate <count> fake images in <path>"
    exit 1
fi

jpeg_header="\xFF\xD8\xFF\xE0\x00\x10J\x46\x49\x46\x00\x01\x01\x00\x60\x00\x60\x00\x00\xFF\xDB\x00\x43\x00\x02\x01\x01\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x02\x00\x00\x00\xFF\xC0\x11\x08\x00\x00\x00\x01\x00\x03\x00\x01\x01\x01\x00\xFF\xC4\x1E\x00\x00\x01\x05\x01\x01\x01\x00\x00\x00\x00\x00\xFF\xC4\x1F\x00\x00\x01\x01\x01\x01\x00\x00\x00\x00\x00\xFF\xDA\x00\x0C\x03\x01\x00\x00\x00\x00\x00\xFF\xD9"

path=$1
count=$2
if [[ "${path: -1}" != "/" ]]; then
    path="${path}/" 
fi
echo $path
for i in $(seq 1 $count); do
    echo -e ${jpeg_header} > "${path}${RANDOM}.jpg"
done
